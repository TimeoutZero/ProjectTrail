---

#Infrastrucure Configuration

nginx:
  image: nginx
  ports:
    - "80:80"
  links:
    - core
  volumes:
    - client/default.conf:/etc/nginx/conf.d/default.conf
    - client/web/builds/dev/:/usr/share/nginx/html

mysql:
  image: mysql:5.7
  ports:
    - "3307:3306"
  environment:
    MYSQL_DATABASE      : ireadme
    MYSQL_ROOT_PASSWORD : ireadme

#Application Configuration

core:
  image: lucasgmartins/java8
  volumes:
    - server/target/ireadme.jar:/app/ireadme.jar
  ports:
    - "8080:8080"
  links:
    - mysql
  command: java -jar /app/ireadme.jar -Dspring.profiles.active=docker
